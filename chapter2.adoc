[[chapter2]]
==  Summary of extensions for Supervisor Domain Access Protection

The following normative architecture extensions are defined.

* `Smsdid` (<<Smsdid>>) - An interface to program the active supervisor domain
under which a hart is operating. This is a dynamic control state on the hart
that can be held in an M-mode CSR and modifiable by the RDSM via CSR r/w
instructions  - herewith called the `supervisor domain identifier` assigned to
the hart. The SDID is a local identifier for the hart and may be used to tag
hart-local resources to access-control data associated with the supervisor
domain. The supervisor domain identifier is independent from the hart privilege
levels and there is one CSR (per hart) managed by M-mode. This extension may be
used independently or may be combined with other extensions in this
specification.

* `Smmtt` (<<Smmtt>>) - An interface to set the access permissions for a memory
region or page associated with a supervisor domain. This interface allows for
dynamic changes of access permission (which may require appropriate flushing of
state cached in harts). The access properties are programmed via an Memory
Tracking Table (MTT) structure, accessed via per-hart M-mode CSRs and which may
be backed by additional in-memory structures. The M-mode CSR interface is
expected to program the root physical page (MTTPPN) - for when the MTT is a
memory-based structure, the MTTPPN would hold the physical address of the root
page of the MTT structure in memory - the MTT is expected to be memory resident
at time of access. When `Smmtt` is active, MTT and e(PMP) remain in use (always
active). Additionally, MTT may be configured in `Bare` mode if granular memory
access control is not required.

* `IO-MTT` (<<IO-MTT>>) - A non-ISA interface enables programming of an IO
interconnect to associate SDID to IOMMU ID (called the SD Classifier). The
assignment of IOMMUs to supervisor domains is also expected to be under the
purview of the RDSM. IO-MTT interface specifies the memory access interface for
physical-addresses encountered during IOMMU address translation as well for the
final physical address of access. Note that isolation of data within a device is
out of scope of this specification.

* `Smsdia` (<<Smsdia>>) - A M-mode CSR interface enables assignment of IMSIC
S-interrupt file or an APLIC domain to a Supervisor Domain. The interface also
describes CSRs to allow M-mode software to retain control on notification of
interrupts when Supervisor domains are enabled.

* `Smsdedbg` (<<Smsdedbg>>) - This extension provides the controls to indicate
if external debug is allowed for a supervisor domain. Whether external debug is
authorized or not is expected to be done via a root of trust (RoT) and is
outside the scope of this specification.

* `Smsdetrc` (<<Smsdetrc>>) - This extension provides the controls to indicate
if external trace is allowed for a supervisor domain. Whether external trace is
authorized or not is expected to be done via a root of trust (RoT) and is
outside the scope of this specification.

* `Smsqosid` and CBQRI for Supervisor Domains (<<Smsdqos>>) - This extension
provides an interface for the RDSM to enforce that resource accesses from a
supervisor domain or the RDSM must not be observable by entities that are not
within their TCB using the resource usage monitors. Similarly, the resource
allocations for a supervisor domain or the RDSM must not be influenced by
entities outside their TCB.

